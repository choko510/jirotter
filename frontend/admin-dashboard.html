<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理ダッシュボード | ラーメンSNS 管理者</title>
    <meta name="robots" content="noindex, nofollow">
    <meta name="description" content="ラーメンSNSの管理者向けダッシュボード。ユーザー・店舗・通報・申請の管理を行う内部ツールです。">
    <link rel="canonical" href="http://localhost:8080/admin/dashboard">
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosansjapanese.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/admin-dashboard.css">
    <script src="js/app.js" defer></script>
    <script src="js/admin-dashboard.js" defer></script>
</head>
<body class="admin-dashboard">
    <header class="page-header">
        <div class="header-inner">
            <a href="/" class="brand">Jirotter</a>
            <nav class="header-nav">
                <a href="/" class="nav-link">ホーム</a>
                <a href="/contribute" class="nav-link">店舗を提案</a>
                <a href="/admin/review" class="nav-link">店舗審査</a>
            </nav>
        </div>
    </header>

    <main class="dashboard-main">
        <div id="dashboard-feedback" class="feedback" role="alert" hidden></div>

        <section class="overview-grid">
            <article class="summary-card" data-field="total-users">
                <header>登録ユーザー</header>
                <p class="summary-value" id="total-users">0</p>
                <p class="summary-sub" id="new-users">過去7日: 0</p>
            </article>
            <article class="summary-card" data-field="active-users">
                <header>アクティブ</header>
                <p class="summary-value" id="active-users">0</p>
            </article>
            <article class="summary-card warning" data-field="restricted-users">
                <header>投稿制限中</header>
                <p class="summary-value" id="restricted-users">0</p>
            </article>
            <article class="summary-card danger" data-field="banned-users">
                <header>BAN中</header>
                <p class="summary-value" id="banned-users">0</p>
            </article>
            <article class="summary-card" data-field="pending-submissions">
                <header>審査待ち店舗</header>
                <p class="summary-value" id="pending-submissions">0</p>
            </article>
            <article class="summary-card" data-field="reports">
                <header>直近7日報告</header>
                <p class="summary-value" id="reports-last-week">0</p>
            </article>
        </section>

        <section class="management-grid">
            <section class="management-panel" id="user-panel">
                <header class="panel-header">
                    <div>
                        <h2>ユーザー管理</h2>
                        <p class="panel-caption">登録済みアカウントの検索・制御を行います。</p>
                    </div>
                    <form id="user-search-form" class="search-form">
                        <input type="search" id="user-search-input" placeholder="ユーザーID・名前・メールで検索">
                        <button type="submit" class="primary-button">検索</button>
                    </form>
                </header>
                <div class="panel-body">
                    <div class="table-wrapper">
                        <table id="user-table" class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>名前</th>
                                    <th>状態</th>
                                    <th>ポイント</th>
                                    <th>投稿</th>
                                    <th>通報</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <aside id="user-detail" class="detail-card" hidden>
                        <header>
                            <div>
                                <h3 id="detail-username"></h3>
                                <p id="detail-userid" class="detail-meta"></p>
                            </div>
                            <span id="detail-status" class="status-badge"></span>
                        </header>
                        <dl class="detail-grid">
                            <div><dt>メール</dt><dd id="detail-email"></dd></div>
                            <div><dt>登録日</dt><dd id="detail-created"></dd></div>
                            <div><dt>ポイント</dt><dd id="detail-points"></dd></div>
                            <div><dt>内部スコア</dt><dd id="detail-internal"></dd></div>
                            <div><dt>フォロー</dt><dd id="detail-following"></dd></div>
                            <div><dt>フォロワー</dt><dd id="detail-followers"></dd></div>
                            <div><dt>店舗投稿</dt><dd id="detail-submissions"></dd></div>
                            <div><dt>BAN期限</dt><dd id="detail-ban"></dd></div>
                            <div><dt>投稿制限期限</dt><dd id="detail-restriction"></dd></div>
                        </dl>
                        <div class="detail-note">
                            <label for="detail-note-input">メモ</label>
                            <textarea id="detail-note-input" rows="3" maxlength="500" placeholder="管理メモを入力"></textarea>
                            <button id="save-note-btn" class="secondary-button">メモを保存</button>
                        </div>
                        <div class="action-buttons">
                            <button class="secondary-button danger" data-action="ban">永久BAN</button>
                            <button class="secondary-button warning" data-action="restrict">投稿制限(7日)</button>
                            <button class="secondary-button" data-action="lift">制限解除</button>
                            <button class="secondary-button" data-action="toggle-admin">管理者権限切替</button>
                        </div>
                    </aside>
                </div>
            </section>

            <section class="management-panel" id="shop-panel">
                <header class="panel-header">
                    <div>
                        <h2>店舗管理</h2>
                        <p class="panel-caption">店舗情報を確認・更新します。</p>
                    </div>
                    <form id="shop-search-form" class="search-form">
                        <input type="search" id="shop-search-input" placeholder="店名・住所で検索">
                        <button type="submit" class="primary-button">検索</button>
                    </form>
                </header>
                <div class="panel-body">
                    <div class="table-wrapper">
                        <table id="shop-table" class="data-table">
                            <thead>
                                <tr>
                                    <th>店名</th>
                                    <th>住所</th>
                                    <th>待ち時間</th>
                                    <th>投稿数</th>
                                    <th>審査待ち</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <aside id="shop-detail" class="detail-card" hidden>
                        <header>
                            <div>
                                <h3 id="shop-name"></h3>
                                <p id="shop-address" class="detail-meta"></p>
                            </div>
                        </header>
                        <form id="shop-update-form" class="detail-grid">
                            <div><label>営業時間<input type="text" id="shop-hours"></label></div>
                            <div><label>定休日<input type="text" id="shop-closed"></label></div>
                            <div><label>座席数<input type="text" id="shop-seats"></label></div>
                            <div><label>緯度<input type="number" step="0.000001" id="shop-lat"></label></div>
                            <div><label>経度<input type="number" step="0.000001" id="shop-lon"></label></div>
                            <div><label>待ち時間 (分)<input type="number" min="0" id="shop-wait"></label></div>
                        </form>
                        <div class="detail-footer">
                            <p id="shop-meta"></p>
                            <button id="shop-save-btn" class="secondary-button">店舗情報を保存</button>
                        </div>
                    </aside>
                    <section class="create-shop">
                        <h3>新規店舗を登録</h3>
                        <form id="new-shop-form" class="create-form">
                            <input type="text" id="new-shop-name" placeholder="店名" required>
                            <input type="text" id="new-shop-address" placeholder="住所" required>
                            <input type="number" step="0.000001" id="new-shop-lat" placeholder="緯度" required>
                            <input type="number" step="0.000001" id="new-shop-lon" placeholder="経度" required>
                            <input type="text" id="new-shop-hours" placeholder="営業時間">
                            <input type="text" id="new-shop-closed" placeholder="定休日">
                            <input type="text" id="new-shop-seats" placeholder="座席">
                            <input type="number" min="0" id="new-shop-wait" placeholder="待ち時間">
                            <button type="submit" class="primary-button">登録する</button>
                        </form>
                    </section>
                </div>
            </section>
        </section>
    </main>
</body>
</html>
